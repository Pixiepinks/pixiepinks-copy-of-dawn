{{ 'component-cart.css' | asset_url | stylesheet_tag }}
{{ 'component-totals.css' | asset_url | stylesheet_tag }}
{{ 'component-discounts.css' | asset_url | stylesheet_tag }}
{{ 'component-loading-overlay.css' | asset_url | stylesheet_tag }}

<section
  id="main-cart-footer"
  data-id="{{ section.id }}"
  class="page-width"
  style="padding-top: {{ section.settings.padding_top }}px; padding-bottom: {{ section.settings.padding_bottom }}px;"
>
  <div class="cart__footer{% if cart == empty %} is-empty{% endif %}">
    <div class="js-contents">
      {% if cart == empty %}
        <div class="cart__warnings">
          <p class="cart__empty-text">{{ 'sections.cart.empty' | t | default: 'Your cart is currently empty.' }}</p>
          <a href="{{ routes.all_products_collection_url }}" class="button">{{ 'general.continue_shopping' | t | default: 'Continue shopping' }}</a>
        </div>
      {% else %}
        <form action="{{ routes.cart_url }}" method="post" novalidate class="cart__footer-main">
          {% if section.settings.show_cart_note %}
            <div class="cart__note">
              <label class="cart__note-label" for="CartSpecialInstructions">{{ 'sections.cart.note' | t | default: 'Order special instructions' }}</label>
              <textarea
                id="CartSpecialInstructions"
                name="note"
                class="text-area"
                aria-label="{{ 'sections.cart.note' | t | default: 'Order special instructions' }}"
              >{{ cart.note }}</textarea>
            </div>
          {% endif %}

          <div class="cart__blocks">
            <div class="totals" role="status">
              <h2 class="totals__subtotal">{{ 'sections.cart.subtotal' | t | default: 'Subtotal' }}</h2>
              <p class="totals__subtotal-value">{{ cart.total_price | money }}</p>
              {% if cart.total_discounts > 0 %}
                <p class="totals__discounts">{{ 'sections.cart.discounts' | t | default: 'Discounts applied' }} {{ cart.total_discounts | money }}</p>
              {% endif %}
              <p class="totals__tax-caption">{{ 'sections.cart.taxes_and_shipping_at_checkout' | t | default: 'Taxes and shipping calculated at checkout.' }}</p>
            </div>

            <div class="cart__ctas">
              <a href="{{ routes.all_products_collection_url }}" class="button button--secondary">{{ 'general.continue_shopping' | t | default: 'Continue shopping' }}</a>
              <button type="submit" name="checkout" class="button">{{ 'sections.cart.checkout' | t | default: 'Checkout' }}</button>
            </div>
          </div>
        </form>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Cart footer",
  "blocks": [
    {
      "type": "subtotal",
      "name": "Subtotal",
      "settings": []
    },
    {
      "type": "buttons",
      "name": "Buttons",
      "settings": []
    }
  ],
  "settings": [
    {
      "type": "checkbox",
      "id": "show_cart_note",
      "default": true,
      "label": "Show order note"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 80,
      "step": 4,
      "unit": "px",
      "default": 20,
      "label": "Padding top"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 80,
      "step": 4,
      "unit": "px",
      "default": 40,
      "label": "Padding bottom"
    }
  ],
  "presets": [
    {
      "name": "Cart footer"
    }
  ]
}
{% endschema %}
